<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (en-US, DDL); Windows/10.0.15063 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2179"/>

<div>
<span><div style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Courier New';font-size:9,0pt;"><span style="color:#cc7832;">package </span>com.pabloangelveliz.ejemplos.kotlin.climaapp<br/><br/><span style="color:#cc7832;">import </span>android.app.Activity<br/><span style="color:#cc7832;">import </span>android.content.Context<br/><span style="color:#cc7832;">import </span>android.content.Intent<br/><span style="color:#cc7832;">import </span>android.os.AsyncTask<br/><span style="color:#cc7832;">import </span>android.support.v7.app.AppCompatActivity<br/><span style="color:#cc7832;">import </span>android.os.Bundle<br/><span style="color:#cc7832;">import </span>android.support.v7.widget.Toolbar<br/><span style="color:#cc7832;">import </span>android.util.Log<br/><span style="color:#cc7832;">import </span>android.view.Menu<br/><span style="color:#cc7832;">import </span>android.view.MenuItem<br/><span style="color:#cc7832;">import </span>android.widget.*<br/><span style="color:#cc7832;">import </span>org.json.JSONObject<br/><span style="color:#cc7832;">import </span>java.io.BufferedReader<br/><span style="color:#cc7832;">import </span>java.io.InputStream<br/><span style="color:#cc7832;">import </span>java.io.InputStreamReader<br/><span style="color:#cc7832;">import </span>java.net.URL<br/><br/><span style="color:#cc7832;">class </span><span style="background-color:#344134;">MainActivity</span> : AppCompatActivity() {<br/><br/>
    <span style="color:#808080;">//region ### LAMBDA EXPRESSION : onItemClickListener ###<br/></span><span style="color:#808080;">    /* Manejo de Nulos<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    En la siguiente sintáxis:<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    private var mAdapter : ArrayAdapter&lt;String&gt;? = null<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    El signo ? antes del igual, está avisando que la variable admite nulos.<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    Cuando me encuentro con temas como el siguiente:<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    supportActionBar!!.setDisplayShowTitleEnabled(false)<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    Los dos signos de admiración juntos !! antes del punto de la propiedad o método del objeto<br/></span><span style="color:#808080;">    están avisando que NO se adminite nulos. Esto SOLO debemos usarlo si sabemos que el valor<br/></span><span style="color:#808080;">    a ser asignado a la variable o método NUNCA será nulo, de lo contrario vamos a caer en el<br/></span><span style="color:#808080;">    mismo error de Java y tendremos el famoso NullPointerException.<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    Ver más detalles sobre este punto en el artículo:<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    http://paveliz.blogspot.com.ar/2017/06/android-comenzando-con-koltin-classes-safety-null.html<br/></span><span style="color:#808080;">    */<br/></span><span style="color:#808080;">    //endregion<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">   </span> <span style="color:#cc7832;">private var </span><span style="color:#9876aa;">mAdapter </span>: ArrayAdapter&lt;String&gt;? = <span style="color:#cc7832;">null<br/></span><span style="color:#cc7832;">    private var </span><span style="color:#9876aa;">mCityArray </span>: ArrayList&lt;String&gt;? = <span style="color:#cc7832;">null<br/></span><span style="color:#cc7832;"><br/></span><span style="color:#cc7832;">    override fun </span><span style="color:#ffc66d;">onCreate</span>(savedInstanceState: Bundle?) {<br/>
        <span style="color:#cc7832;">super</span>.onCreate(savedInstanceState)<br/>
        setContentView(R.layout.<span style="color:#9876aa;font-style:italic;">activity_main</span>)<br/><br/>
        <span style="color:#cc7832;">val </span>toolbar = findViewById(R.id.<span style="color:#9876aa;font-style:italic;">toolbar</span>) <span style="color:#cc7832;">as </span>Toolbar<br/>
        setSupportActionBar(toolbar)<br/>
        <span style="color:#9876aa;font-style:italic;">supportActionBar</span>!!.setDisplayShowTitleEnabled(<span style="color:#cc7832;">false</span>)<br/>
        <span style="color:#9876aa;font-style:italic;">supportActionBar</span>!!.setDisplayHomeAsUpEnabled(<span style="color:#cc7832;">false</span>)<br/><br/>
        <span style="color:#cc7832;">val </span>mListView = findViewById(R.id.<span style="color:#9876aa;font-style:italic;">listViewCities</span>) <span style="color:#cc7832;">as </span>ListView<br/>
        <span style="color:#cc7832;">val </span>txtTemp = findViewById(R.id.<span style="color:#9876aa;font-style:italic;">textViewTemperatura</span>) <span style="color:#cc7832;">as </span>TextView<br/>
        <span style="color:#cc7832;">val </span>txtDesc = findViewById(R.id.<span style="color:#9876aa;font-style:italic;">textViewDescription</span>) <span style="color:#cc7832;">as </span>TextView<br/>
        <span style="color:#cc7832;">val </span>imgWeahter = findViewById(R.id.<span style="color:#9876aa;font-style:italic;">imageViewWeather</span>) <span style="color:#cc7832;">as </span>ImageView<br/>
        <span style="color:#cc7832;">val </span>txtCityName = findViewById(R.id.<span style="color:#9876aa;font-style:italic;">textViewCityName</span>) <span style="color:#cc7832;">as </span>TextView<br/><br/>
        <span style="color:#808080;">//region ### INICIALIZACION del CLIMA ###<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">       </span> GetWeatherTask(<span style="color:#cc7832;">this, </span>txtTemp<span style="color:#cc7832;">, </span>txtDesc<span style="color:#cc7832;">, </span>imgWeahter)<br/>
                .execute(<span style="color:#9876aa;font-style:italic;">resources</span>.getString(R.string.<span style="color:#9876aa;font-style:italic;">JsonURL</span>)<br/>
                        .<span style="color:#ffc66d;font-style:italic;">replace</span>(<span style="color:#6a8759;">&quot;#CITY#&quot;</span><span style="color:#cc7832;">, </span><span style="color:#9876aa;font-style:italic;">resources</span>.getString(R.string.<span style="color:#9876aa;font-style:italic;">ciudadInicial</span>)<span style="color:#cc7832;">, false</span>))<br/><br/>
        txtCityName.<span style="color:#9876aa;font-style:italic;">text </span>= <span style="color:#9876aa;font-style:italic;">resources</span>.getString(R.string.<span style="color:#9876aa;font-style:italic;">ciudadInicial</span>)<br/><br/>
        <span style="color:#808080;">//endregion<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">       </span> <span style="color:#cc7832;">val </span>iarr : Array&lt;String&gt; = <span style="color:#9876aa;font-style:italic;">resources</span>.getStringArray(R.array.<span style="color:#9876aa;font-style:italic;">cities_array</span>)<br/><br/>
        <span style="color:#9876aa;">mCityArray </span>= ArrayList&lt;String&gt;(iarr.<span style="color:#ffc66d;font-style:italic;">asList</span>())<br/><br/>
        <span style="color:#9876aa;">mAdapter </span>= ArrayAdapter&lt;String&gt;(<span style="color:#cc7832;">this,<br/></span><span style="color:#cc7832;">                               </span> R.layout.<span style="color:#9876aa;font-style:italic;">list_row</span><span style="color:#cc7832;">,<br/></span><span style="color:#cc7832;">                               </span> R.id.<span style="color:#9876aa;font-style:italic;">lblCityName</span><span style="color:#cc7832;">,<br/></span><span style="color:#cc7832;">                               </span> <span style="color:#9876aa;">mCityArray</span>)<br/>
        mListView.<span style="color:#9876aa;font-style:italic;">adapter </span>= <span style="color:#9876aa;">mAdapter<br/></span><span style="color:#9876aa;"><br/></span><span style="color:#9876aa;">       </span> <span style="color:#808080;">//region ### LAMBDA EXPRESSION : onItemClickListener ###<br/></span><span style="color:#808080;">        /*<br/></span><span style="color:#808080;">        VERSION &quot;onItemClickListener&quot; NO lambda<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        Esta es la clásica implementación de un onItemClickListener en Android con Java, dónde<br/></span><span style="color:#808080;">        hacemos uso de una &quot;inner class&quot; a los fines de simplificar código.<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        mListView.setOnItemClickListener(new OnItemClickListener() {<br/></span><span style="color:#808080;">           @Override<br/></span><span style="color:#808080;">           public void onItemClick(AdapterView&lt;?&gt; parent, View view,<br/></span><span style="color:#808080;">             int position, long id) {<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">            Log.d(&quot;onItemClick&quot;, &quot;Se hizo clic&quot;)<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">           }<br/></span><span style="color:#808080;">         });<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        VERSION &quot;onItemClickListener&quot; lambda expression<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        Kotlin incorpora Lambda expressions, lo que permite simplificar aún más implementaciones<br/></span><span style="color:#808080;">        de este tipo.<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        mListView.onItemClickListener = AdapterView.OnItemClickListener { parent, view, position, id -&gt;<br/></span><span style="color:#808080;">            Log.d(&quot;onItemClick&quot;, &quot;Se hizo clic&quot;)<br/></span><span style="color:#808080;">        }<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        view y id no se usan, entonces pueden reemplazarse por un underscore &quot;_&quot;<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        mListView.onItemClickListener = AdapterView.OnItemClickListener { parent, _, position, _ -&gt;<br/></span><span style="color:#808080;">            Log.d(&quot;onItemClick&quot;, &quot;Se hizo clic&quot;)<br/></span><span style="color:#808080;">        }<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">        */<br/></span><span style="color:#808080;">        //endregion<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">       </span> mListView.<span style="color:#9876aa;font-style:italic;">onItemClickListener </span>= AdapterView.OnItemClickListener <span style="font-weight:bold;">{ </span>parent<span style="color:#cc7832;">, </span>_<span style="color:#cc7832;">, </span>position<span style="color:#cc7832;">, </span>_ <span style="font-weight:bold;">-&gt;<br/></span><span style="font-weight:bold;"><br/></span><span style="font-weight:bold;">           </span> <span style="color:#cc7832;">val </span>sCityName = parent.getItemAtPosition(position) <span style="color:#cc7832;">as </span>String<br/><br/>
            txtCityName.<span style="color:#9876aa;font-style:italic;">text </span>= sCityName<br/><br/>
            GetWeatherTask(parent.<span style="color:#9876aa;font-style:italic;">context</span><span style="color:#cc7832;">, </span>txtTemp<span style="color:#cc7832;">, </span>txtDesc<span style="color:#cc7832;">, </span>imgWeahter).execute(<span style="color:#9876aa;font-style:italic;">resources</span>.getString(R.string.<span style="color:#9876aa;font-style:italic;">JsonURL</span>).<span style="color:#ffc66d;font-style:italic;">replace</span>(<span style="color:#6a8759;">&quot;#CITY#&quot;</span><span style="color:#cc7832;">, </span>sCityName<span style="color:#cc7832;">, false</span>))<br/>
        <span style="font-weight:bold;">}<br/></span><span style="font-weight:bold;"><br/></span><span style="font-weight:bold;"><br/></span><span style="font-weight:bold;">   </span> }<br/><br/>
    <span style="color:#808080;">//region ### METODOS vs FUN y OVERRIDE ###<br/></span><span style="color:#808080;">    /*<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    Lo que teníamos como &quot;métodos&quot; en Java para darle cierta funcionalidad a nuestras clases,<br/></span><span style="color:#808080;">    en Kotlin se llaman Functions (Funciones) y se precede por la palabra reservada &quot;fun&quot;:<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    fun [nombre de la función]([variable]: [tipo de dato]): [tipo de dato de retorno] {<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    Ejemplo:<br/></span><span style="color:#808080;">            kelvinConversion(kelvin_temperature : Double): String {<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    En esta función llamada &quot;kelvinConversion&quot;, la misma recibe un tipo Double en una variable<br/></span><span style="color:#808080;">    que se llamará &quot;kelvin_temperature&quot; y se retorna un String.<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    De no necesitar retornar nada, no es necesario usar &quot;void&quot;, sino simplemente obviamos el<br/></span><span style="color:#808080;">    tipo de dato de retorno.<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    Ejemplo:<br/></span><span style="color:#808080;">            fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?)<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">    Ver: http://paveliz.blogspot.com.ar/2017/06/android-comenzando-con-koltin-classes-safety-null.html<br/></span><span style="color:#808080;">    */<br/></span><span style="color:#808080;">    //endregion<br/></span><span style="color:#808080;"><br/></span><span style="color:#808080;">   </span> <span style="color:#cc7832;">override fun </span><span style="color:#ffc66d;">onCreateOptionsMenu</span>(menu: Menu): Boolean {<br/>
        <span style="color:#9876aa;font-style:italic;">menuInflater</span>.inflate(R.menu.<span style="color:#9876aa;font-style:italic;">main_menu</span><span style="color:#cc7832;">, </span>menu)<br/>
        <span style="color:#cc7832;">return true<br/></span><span style="color:#cc7832;">   </span> }<br/><br/>
    <span style="color:#cc7832;">override fun </span><span style="color:#ffc66d;">onOptionsItemSelected</span>(item: MenuItem): Boolean {<br/><br/>
        <span style="color:#cc7832;">val </span>menu_id = item.<span style="color:#9876aa;font-style:italic;">itemId<br/></span><span style="color:#9876aa;font-style:italic;"><br/></span><span style="color:#9876aa;font-style:italic;">       </span> <span style="color:#cc7832;">when </span>(menu_id){<br/><br/>
            R.id.<span style="color:#9876aa;font-style:italic;">menuCodigoMainActivity </span>-&gt; {<br/>
                <span style="color:#cc7832;">val </span>i = Intent(<span style="color:#cc7832;">this, </span>Tutorial::<span style="color:#cc7832;">class</span>.<span style="color:#9876aa;font-style:italic;">java</span>)<br/>
                i.putExtra(<span style="color:#6a8759;">&quot;codeFile&quot;</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">&quot;MainActivity&quot;</span>)<br/>
                startActivity(i)<br/>
            }<br/><br/>
            R.id.<span style="color:#9876aa;font-style:italic;">menuCodigoAgregarCiudad </span>-&gt; {<br/>
                <span style="color:#cc7832;">val </span>i = Intent(<span style="color:#cc7832;">this, </span>Tutorial::<span style="color:#cc7832;">class</span>.<span style="color:#9876aa;font-style:italic;">java</span>)<br/>
                i.putExtra(<span style="color:#6a8759;">&quot;codeFile&quot;</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">&quot;AgregarCiudad&quot;</span>)<br/>
                startActivity(i)<br/>
            }<br/><br/>
            R.id.<span style="color:#9876aa;font-style:italic;">menuCodigoTutorial </span>-&gt; {<br/>
                <span style="color:#cc7832;">val </span>i = Intent(<span style="color:#cc7832;">this, </span>Tutorial::<span style="color:#cc7832;">class</span>.<span style="color:#9876aa;font-style:italic;">java</span>)<br/>
                i.putExtra(<span style="color:#6a8759;">&quot;codeFile&quot;</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">&quot;Tutorial&quot;</span>)<br/>
                startActivity(i)<br/>
            }<br/><br/>
            R.id.<span style="color:#9876aa;font-style:italic;">menuCodigoAbout </span>-&gt; {<br/>
                <span style="color:#cc7832;">val </span>i = Intent(<span style="color:#cc7832;">this, </span>Tutorial::<span style="color:#cc7832;">class</span>.<span style="color:#9876aa;font-style:italic;">java</span>)<br/>
                i.putExtra(<span style="color:#6a8759;">&quot;codeFile&quot;</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">&quot;Acerca&quot;</span>)<br/>
                startActivity(i)<br/>
            }<br/><br/>
            R.id.<span style="color:#9876aa;font-style:italic;">menuAbout </span>-&gt; {<br/>
                <span style="color:#cc7832;">val </span>i = Intent(<span style="color:#cc7832;">this, </span>Acerca::<span style="color:#cc7832;">class</span>.<span style="color:#9876aa;font-style:italic;">java</span>)<br/>
                startActivity(i)<br/>
            }<br/><br/>
            R.id.<span style="color:#9876aa;font-style:italic;">menuAgregarCiudad </span>-&gt; {<br/>
                <span style="color:#cc7832;">val </span>i = Intent(<span style="color:#cc7832;">this, </span>AgregarCiudad::<span style="color:#cc7832;">class</span>.<span style="color:#9876aa;font-style:italic;">java</span>)<br/>
                startActivityForResult(i<span style="color:#cc7832;">, </span><span style="color:#6897bb;">100</span>)<br/>
            }<br/>
        }<br/><br/>
        <span style="color:#cc7832;">return super</span>.onOptionsItemSelected(item)<br/>
    }<br/><br/>
    <span style="color:#cc7832;">override fun </span><span style="color:#ffc66d;">onActivityResult</span>(requestCode: Int<span style="color:#cc7832;">, </span>resultCode: Int<span style="color:#cc7832;">, </span>data: Intent?)  {<br/><br/>
        <span style="color:#cc7832;">if </span>(requestCode == <span style="color:#6897bb;">100 </span>&amp;&amp; resultCode == Activity.<span style="color:#9876aa;font-style:italic;">RESULT_OK</span>) {<br/><br/>
            <span style="color:#cc7832;">if</span>(data != <span style="color:#cc7832;">null</span>) {<br/><br/>
                <span style="color:#9876aa;">mCityArray</span>?.add(<span style="background-color:#223c23;">data</span>.getStringExtra(<span style="color:#6a8759;">&quot;nombreCiudad&quot;</span>))<br/>
            }<br/><br/>
            <span style="color:#9876aa;">mAdapter</span>!!.notifyDataSetChanged()<br/>
        }<br/>
    }<br/><br/>
    <span style="color:#cc7832;">class </span>GetWeatherTask(<span style="color:#cc7832;">var </span><span style="color:#9876aa;">context </span>: Context<span style="color:#cc7832;">, var </span><span style="color:#9876aa;">tvTemperature</span>: TextView<span style="color:#cc7832;">,<br/></span><span style="color:#cc7832;">                         var </span><span style="color:#9876aa;">tvDescription</span>: TextView<span style="color:#cc7832;">,<br/></span><span style="color:#cc7832;">                         var </span><span style="color:#9876aa;">imgWeather</span>: ImageView) : AsyncTask&lt;String<span style="color:#cc7832;">, </span>Unit<span style="color:#cc7832;">, </span>String&gt;() {<br/><br/>
        <span style="color:#cc7832;">override fun </span><span style="color:#ffc66d;">doInBackground</span>(<span style="color:#cc7832;">vararg </span>params: String?): String? {<br/><br/>
            <span style="color:#cc7832;">val </span>inputStream : InputStream<br/>
            <span style="color:#cc7832;">var </span>result = <span style="color:#6a8759;">&quot;&quot;<br/></span><span style="color:#6a8759;"><br/></span><span style="color:#6a8759;">           </span> <span style="color:#cc7832;">try </span>{<br/>
                inputStream = URL(params[<span style="color:#6897bb;">0</span>]).openStream()<br/><br/>
                <span style="color:#cc7832;">if</span>(inputStream != <span style="color:#cc7832;">null</span>) {<br/>
                    <span style="color:#cc7832;">val </span>buffer = BufferedReader (InputStreamReader(inputStream))<br/>
                    <span style="color:#cc7832;">val </span>stringBuilder = StringBuilder()<br/>
                    buffer.<span style="color:#ffc66d;font-style:italic;">forEachLine </span><span style="font-weight:bold;">{ </span>stringBuilder.append(<span style="font-weight:bold;">it</span>) <span style="font-weight:bold;">}<br/></span><span style="font-weight:bold;"><br/></span><span style="font-weight:bold;">                   </span> result = stringBuilder.toString()<br/>
                }<br/><br/>
            } <span style="color:#cc7832;">catch </span>(e : Exception) {<br/>
                Log.d(<span style="color:#6a8759;">&quot;InputStream&quot;</span><span style="color:#cc7832;">, </span>e.<span style="color:#9876aa;font-style:italic;">localizedMessage</span>)<br/>
            }<br/><br/>
            <span style="color:#cc7832;">return </span>result<br/>
        }<br/><br/>
        <span style="color:#cc7832;">override fun </span><span style="color:#ffc66d;">onPostExecute</span>(result: String?) {<br/><br/>
            <span style="color:#cc7832;">super</span>.onPostExecute(result)<br/><br/>
            <span style="color:#cc7832;">val </span>json = JSONObject(result)<br/><br/>
            <span style="color:#cc7832;">val </span>json_main = json.getJSONObject(<span style="color:#6a8759;">&quot;main&quot;</span>)<br/>
            <span style="color:#cc7832;">val </span>json_array_weather = json.getJSONArray(<span style="color:#6a8759;">&quot;weather&quot;</span>)<br/><br/>
            <span style="color:#cc7832;">val </span>temp_kelvin = json_main.getDouble(<span style="color:#6a8759;">&quot;temp&quot;</span>)<br/>
            <span style="color:#cc7832;">val </span>pressure = json_main.getLong(<span style="color:#6a8759;">&quot;pressure&quot;</span>)<br/>
            <span style="color:#cc7832;">val </span>humidity = json_main.getLong(<span style="color:#6a8759;">&quot;humidity&quot;</span>)<br/><br/>
            <span style="color:#cc7832;">var </span>temp_description = <span style="color:#6a8759;">&quot;&quot;<br/></span><span style="color:#6a8759;">           </span> <span style="color:#cc7832;">var </span>temp_icon = <span style="color:#6a8759;">&quot;&quot;<br/></span><span style="color:#6a8759;"><br/></span><span style="color:#6a8759;">           </span> <span style="color:#cc7832;">for </span>(i <span style="color:#cc7832;">in </span><span style="color:#6897bb;">0 </span>.. json_array_weather.length()-<span style="color:#6897bb;">1</span>) {<br/><br/>
                <span style="color:#cc7832;">val </span>json_weather = json_array_weather.getJSONObject(i)<br/><br/>
                temp_description = json_weather.getString(<span style="color:#6a8759;">&quot;description&quot;</span>)<br/>
                temp_icon = json_weather.getString(<span style="color:#6a8759;">&quot;icon&quot;</span>)<br/>
            }<br/><br/>
            <span style="color:#9876aa;">tvTemperature</span>.<span style="color:#9876aa;font-style:italic;">text </span>= kelvinConversion(temp_kelvin)<br/>
            <span style="color:#9876aa;">tvDescription</span>.<span style="color:#9876aa;font-style:italic;">text </span>= temp_description<br/>
            <span style="color:#9876aa;">imgWeather</span>.setImageResource( <span style="color:#9876aa;">context</span>.<span style="color:#9876aa;font-style:italic;">resources</span>.getIdentifier(<span style="color:#6a8759;">&quot;weather_&quot;</span>+temp_icon<span style="color:#cc7832;">, </span><span style="color:#6a8759;">&quot;drawable&quot;</span><span style="color:#cc7832;">, </span><span style="color:#9876aa;">context</span>.<span style="color:#9876aa;font-style:italic;">packageName</span>) )<br/>
                                                                                                                                                        }<br/><br/>
        <span style="color:#cc7832;">fun </span><span style="color:#ffc66d;">kelvinConversion</span>(kelvin_temperature : Double): String {<br/><br/>
            <span style="color:#cc7832;">val </span>temperaturaKFloat = <span style="color:#6a8759;">&quot;%.2f&quot;</span>.<span style="color:#ffc66d;font-style:italic;">format</span>((kelvin_temperature.toFloat()) - <span style="color:#6897bb;">273.15</span>)<br/><br/>
            <span style="color:#cc7832;">return </span>temperaturaKFloat<br/>
        }<br/>
    }<br/>
}<br/></div></span>
</div></body></html> 